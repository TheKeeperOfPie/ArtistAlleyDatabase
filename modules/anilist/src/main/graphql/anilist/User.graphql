query AuthedUser {
    Viewer {
        id
        name
        options {
            profileColor
        }
        mediaListOptions {
            scoreFormat
        }
    }
}

fragment UserFavoriteMediaNode on Media {
    id
    coverImage {
        color
        large
    }
    title {
        userPreferred
    }
    format
    averageScore
}

query UserById($id: Int!) {
    User(id: $id) {
        id
        name
        about(asHtml: true)
        avatar {
            large
        }
        bannerImage
        isFollower
        isFollowing
        createdAt
        previousNames {
            name
        }

        favourites {
            anime {
                edges {
                    favouriteOrder
                    node {
                        ...UserFavoriteMediaNode
                    }
                }
            }
            manga {
                edges {
                    favouriteOrder
                    node {
                        ...UserFavoriteMediaNode
                    }
                }
            }
            characters {
                edges {
                    ...DetailsCharacterEdge
                    favouriteOrder
                }
            }
            staff {
                edges {
                    favouriteOrder
                    node {
                        id
                        name {
                            userPreferred
                        }
                        image {
                            large
                        }
                        primaryOccupations
                    }
                }
            }
            studios {
                edges {
                    favouriteOrder
                    node {
                        id
                        name
                    }
                }
            }
        }

        statistics {
            anime {
                count
                meanScore
                minutesWatched
                ...UserMediaStatistics
            }
            manga {
                count
                meanScore
                chaptersRead
                ...UserMediaStatistics
            }
        }
    }
}

fragment UserMediaStatistics on UserStatistics {
    formats(sort: [COUNT_DESC]) {
        count
        format
    }

    statuses(sort: [COUNT_DESC]) {
        count
        status
    }

    scores {
        count
        score
    }

    lengths {
        count
        length
    }

    releaseYears {
        count
        releaseYear
    }

    startYears {
        count
        startYear
    }

    genres(sort: COUNT_DESC) {
        count
        genre
        meanScore
        chaptersRead
        minutesWatched
        mediaIds
    }
}
